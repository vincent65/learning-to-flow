FCLF Project Structure
======================

learning-to-flow/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                    â† Main documentation
â”œâ”€â”€ ğŸ“„ GETTING_STARTED.md           â† Quick start guide
â”œâ”€â”€ ğŸ“„ PROJECT_SUMMARY.md           â† Implementation summary
â”œâ”€â”€ ğŸ“„ PRD.md                       â† Product requirements
â”œâ”€â”€ ğŸ“„ requirements.txt             â† Python dependencies
â”œâ”€â”€ ğŸ“„ setup.py                     â† Package setup
â”œâ”€â”€ ğŸ“„ .gitignore                   â† Git ignore rules
â”‚
â”œâ”€â”€ ğŸ“ configs/
â”‚   â”œâ”€â”€ decoder_config.yaml         â† Decoder hyperparameters
â”‚   â””â”€â”€ fclf_config.yaml            â† FCLF hyperparameters
â”‚
â”œâ”€â”€ ğŸ“ data/
â”‚   â”œâ”€â”€ celeba/                     â† CelebA dataset (download)
â”‚   â”‚   â”œâ”€â”€ img_align_celeba/       â† 202,599 face images
â”‚   â”‚   â””â”€â”€ list_attr_celeba.txt    â† Attribute labels
â”‚   â””â”€â”€ embeddings/                 â† Cached CLIP embeddings
â”‚       â”œâ”€â”€ train_embeddings.pt
â”‚       â”œâ”€â”€ val_embeddings.pt
â”‚       â””â”€â”€ test_embeddings.pt
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ data/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ celeba_dataset.py       â† Dataset loader
â”‚   â”‚   â”œâ”€â”€ embedding_cache.py      â† CLIP embedding cache
â”‚   â”‚   â””â”€â”€ data_utils.py           â† Preprocessing utilities
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ vector_field.py         â† Vector field network
â”‚   â”‚   â””â”€â”€ clip_decoder.py         â† CLIP decoder (+ VAE)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ losses/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ contrastive_flow_loss.py â† InfoNCE loss
â”‚   â”‚   â”œâ”€â”€ regularization.py       â† Curl/divergence
â”‚   â”‚   â””â”€â”€ combined_loss.py        â† Total loss
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ training/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ train_decoder.py        â† Decoder training
â”‚   â”‚   â””â”€â”€ train_fclf.py           â† FCLF training
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ evaluation/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ metrics.py              â† Evaluation metrics
â”‚   â”‚   â””â”€â”€ visualize.py            â† Visualization tools
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ inference/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ inference.py            â† Inference pipeline
â”‚
â”œâ”€â”€ ğŸ“ scripts/
â”‚   â”œâ”€â”€ download_data.sh            â† Data download guide
â”‚   â”œâ”€â”€ precompute_embeddings.py    â† Embedding cache script
â”‚   â”œâ”€â”€ train_decoder.sh            â† Decoder training script
â”‚   â”œâ”€â”€ train_fclf.sh               â† FCLF training script
â”‚   â””â”€â”€ run_evaluation.py           â† Evaluation script
â”‚
â”œâ”€â”€ ğŸ“ notebooks/                   â† Jupyter notebooks (TBD)
â”‚   â”œâ”€â”€ 01_data_exploration.ipynb
â”‚   â”œâ”€â”€ 02_decoder_analysis.ipynb
â”‚   â”œâ”€â”€ 03_fclf_results.ipynb
â”‚   â””â”€â”€ 04_ablation_studies.ipynb
â”‚
â”œâ”€â”€ ğŸ“ checkpoints/                 â† Model checkpoints
â”‚   â”œâ”€â”€ decoder_best.pt
â”‚   â””â”€â”€ fclf_best.pt
â”‚
â””â”€â”€ ğŸ“ results/                     â† Evaluation results
    â”œâ”€â”€ figures/
    â”œâ”€â”€ metrics/
    â””â”€â”€ generated_images/

Key Components:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Data Pipeline
   â””â”€ CelebADataset â†’ CLIP Encoder â†’ Cached Embeddings

2. Decoder
   â””â”€ CLIP Embedding (512) â†’ Transposed CNN â†’ Image (128Ã—128)

3. Vector Field
   â””â”€ (Embedding, Attributes) â†’ MLP â†’ Velocity Vector

4. Training
   â””â”€ Contrastive Loss + Regularization â†’ Optimized Flow

5. Evaluation
   â””â”€ Metrics (Silhouette, Purity) + Visualizations (UMAP)

6. Inference
   â””â”€ Image â†’ Flow â†’ Decode â†’ Transformed Image

Workflow:
â”€â”€â”€â”€â”€â”€â”€â”€â”€

Setup      â†’ Download â†’ Precompute â†’ Train Decoder â†’ Train FCLF â†’ Evaluate
(5 min)      (30 min)    (20 min)      (2-3 hrs)       (4-6 hrs)    (10 min)

Total Time: ~7-10 hours
